Return-Path: <linux-omap-owner@vger.kernel.org>
X-Original-To: lists+linux-omap@lfdr.de
Delivered-To: lists+linux-omap@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id E84CB272D38
	for <lists+linux-omap@lfdr.de>; Mon, 21 Sep 2020 18:38:30 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729168AbgIUQi1 (ORCPT <rfc822;lists+linux-omap@lfdr.de>);
        Mon, 21 Sep 2020 12:38:27 -0400
Received: from mx2.suse.de ([195.135.220.15]:41870 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1729163AbgIUQiX (ORCPT <rfc822;linux-omap@vger.kernel.org>);
        Mon, 21 Sep 2020 12:38:23 -0400
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
        by mx2.suse.de (Postfix) with ESMTP id 2EE1FAF9C;
        Mon, 21 Sep 2020 16:38:57 +0000 (UTC)
Date:   Mon, 21 Sep 2020 18:38:20 +0200
Message-ID: <s5h8sd3nkzn.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Qilong Zhang <zhangqilong3@huawei.com>
Cc:     <peter.ujfalusi@ti.com>, <perex@perex.cz>, <tiwai@suse.com>,
        <linux-omap@vger.kernel.org>, <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH -next] sound: use devm_platform_ioremap_resource_byname
In-Reply-To: <20200916111122.144963-1-zhangqilong3@huawei.com>
References: <20200916111122.144963-1-zhangqilong3@huawei.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-omap.vger.kernel.org>
X-Mailing-List: linux-omap@vger.kernel.org

On Wed, 16 Sep 2020 13:11:22 +0200,
Qilong Zhang wrote:
> 
> Use the devm_platform_ioremap_resource_byname() helper instead of
> calling platform_get_resource_byname() and devm_ioremap_resource()
> separately.
> 
> Signed-off-by: Zhang Qilong <zhangqilong3@huawei.com>
> ---
>  sound/soc/ti/omap-mcbsp.c | 6 +-----

This is an ASoC stuff, and should be submitted to the proper
maintainer (Mark).  Also please use the subject prefix matching
with the target subsystem.  In this case, it should be
"ASoC: xxx".


thanks,

Takashi

>  1 file changed, 1 insertion(+), 5 deletions(-)
> 
> diff --git a/sound/soc/ti/omap-mcbsp.c b/sound/soc/ti/omap-mcbsp.c
> index 6025b30bbe77..186cea91076f 100644
> --- a/sound/soc/ti/omap-mcbsp.c
> +++ b/sound/soc/ti/omap-mcbsp.c
> @@ -620,11 +620,7 @@ static int omap_mcbsp_init(struct platform_device *pdev)
>  	spin_lock_init(&mcbsp->lock);
>  	mcbsp->free = true;
>  
> -	res = platform_get_resource_byname(pdev, IORESOURCE_MEM, "mpu");
> -	if (!res)
> -		res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
> -
> -	mcbsp->io_base = devm_ioremap_resource(&pdev->dev, res);
> +	mcbsp->io_base = devm_platform_ioremap_resource_byname(pdev, "mpu");
>  	if (IS_ERR(mcbsp->io_base))
>  		return PTR_ERR(mcbsp->io_base);
>  
> -- 
> 2.17.1
> 
